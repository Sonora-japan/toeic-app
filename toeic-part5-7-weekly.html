<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>今週のTOEIC Part 5〜7 模試</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 800px; margin: auto; line-height: 1.6; }
    h1, h2 { color: #003366; }
    .question { margin-bottom: 2em; }
    .result { font-weight: bold; font-size: 1.2em; margin-top: 2em; }
    .correct { color: green; }
    .incorrect { color: red; }
    #timer { font-weight: bold; font-size: 1.1em; margin-bottom: 1em; color: #555; }
    #language-select { margin-bottom: 1em; }
  </style>
</head>
<body>
  <h1 id="main-title">📝 今週のTOEIC Part 5〜7 模試</h1>
  <div id="language-select">
    🌐 言語を選択: 
    <select onchange="setLanguage(this.value)">
      <option value="ja">日本語</option>
      <option value="en">English</option>
      <option value="ko">한국어</option>
    </select>
  </div>
  <div id="timer">🕒 解答時間: 0秒</div>
  <form id="toeic-form">
    <h2>📘 Part 5: 文法穴埋め（5問）</h2>
    <div id="questions"></div>

    <h2>📮 Part 6: 社内通知文（4問）</h2>
    <div id="part6"></div>

    <h2>📰 Part 7: 英文記事読解（3問）</h2>
    <div id="part7">
  <p><strong>Article:</strong><br>
  TechLingua Inc. has announced a new update to its AI-powered translation app, <em>LinguaNow</em>. The update includes real-time voice recognition, cultural nuance suggestions, and smoother integration with business messaging tools. According to CEO Mai Tanaka, the update will help international teams collaborate more effectively across languages. The company plans to roll out the update globally by the end of the month.</p>

  <div class="question">
    <p><strong>Q10:</strong> What is the main purpose of the update to LinguaNow?</p>
    <label><input type="radio" name="q9" value="To improve app security"> To improve app security</label><br>
    <label><input type="radio" name="q9" value="To enhance international communication"> To enhance international communication</label><br>
    <label><input type="radio" name="q9" value="To expand offline use"> To expand offline use</label><br>
    <label><input type="radio" name="q9" value="To offer new payment options"> To offer new payment options</label><br>
    <p class="explanation" id="explain9"></p>
  </div>

  <div class="question">
    <p><strong>Q11:</strong> According to the article, what is one feature added in the update?</p>
    <label><input type="radio" name="q10" value="Offline dictionary"> Offline dictionary</label><br>
    <label><input type="radio" name="q10" value="Cultural suggestions"> Cultural suggestions</label><br>
    <label><input type="radio" name="q10" value="Grammar tutorials"> Grammar tutorials</label><br>
    <label><input type="radio" name="q10" value="Speech recording"> Speech recording</label><br>
    <p class="explanation" id="explain10"></p>
  </div>

  <div class="question">
    <p><strong>Q12:</strong> What does TechLingua plan to do by the end of the month?</p>
    <label><input type="radio" name="q11" value="Release a new app"> Release a new app</label><br>
    <label><input type="radio" name="q11" value="Hire new translators"> Hire new translators</label><br>
    <label><input type="radio" name="q11" value="Launch an ad campaign"> Launch an ad campaign</label><br>
    <label><input type="radio" name="q11" value="Distribute the update globally"> Distribute the update globally</label><br>
    <p class="explanation" id="explain11"></p>
  </div>
</div>

    <button id="submit-button" type="button" onclick="gradeQuiz()">解答を提出する</button>
  </form>

  <div id="score" class="result"></div>
  <div id="time-result" class="result"></div>

  <div class="result">
    <h2 id="share-title">📤 結果をSNSでシェアしよう！</h2>
    <p id="share-text">この模擬テストに挑戦したことを友達に知らせよう！</p>
    <button id="share-twitter" onclick="shareOnTwitter()">🕊 X（Twitter）でシェア</button>
    <button id="share-instagram" onclick="captureResult()">📸 Instagram用画像を保存</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js">
function gradeQuiz() {
  const answers = [
    "effective", "impose", "rise", "affect", "financial", // Part 5 (q0–q4)
    "postponed", "consult", "shortly", "transition",         // Part 6 (q5–q8)
    "To enhance international communication", "Cultural suggestions", "Distribute the update globally" // Part 7 (q9–q11)
  ];

  let correct = 0;
  for (let i = 0; i < answers.length; i++) {
    const selected = document.querySelector(`input[name=q${i}]:checked`);
    const explanation = document.getElementById(`explain${i}`);
    if (selected) {
      if (selected.value === answers[i]) {
        correct++;
        explanation.innerHTML = `<span class='correct'>正解！</span> ✅`;
      } else {
        explanation.innerHTML = `<span class='incorrect'>不正解 ❌</span><br>あなたの答え: ${selected.value}<br><span class='correct'>正解: ${answers[i]}</span>`;
      }
    } else {
      explanation.innerHTML = `<span class='incorrect'>未回答 ⚠️</span><br><span class='correct'>正解: ${answers[i]}</span>`;
    }
  }

  const percentage = ((correct / answers.length) * 100).toFixed(1);
  document.getElementById("score").innerHTML = `あなたの正解数は <span class='correct'>${correct}</span> / ${answers.length}（<strong>${percentage}%</strong>）です！`;

  const elapsed = Math.floor((Date.now() - startTime) / 1000);
  let timeMessage = `⏱ 解答時間は ${elapsed} 秒です。`;
  timeMessage += elapsed <= expectedTimeSec ? "（時間内に解き終わりました✨）" : "（想定時間を超えています⚠️）";
  document.getElementById("time-result").textContent = timeMessage;
}
</script>
  <script>
    let currentLang = "ja";
let startTime = Date.now();
const expectedTimeSec = 600; // 10分目安

// Part 5 問題データ
const part5Data = [
  { q: "The new tariff policy will be ______ next Monday, affecting all imported goods.", options: ["effective", "effect", "effectively", "effectiveness"], answer: "effective", explanations: { ja: "be動詞の後に形容詞が必要。'effective' は『有効な』という意味。", en: "An adjective is needed after 'be'. 'Effective' means valid or active.", ko: "be 동사 뒤에는 형용사가 필요합니다. 'effective'는 '효과적인'이라는 뜻입니다." } },
  { q: "The government decided to ______ a 10% tariff on all imports.", options: ["impose", "increase", "collect", "lower"], answer: "impose", explanations: { ja: "関税を『課す』には 'impose a tariff' という表現が自然。", en: "'Impose a tariff' is the natural phrase meaning to apply a tax.", ko: "'관세를 부과하다'는 뜻의 자연스러운 표현은 'impose a tariff'입니다." } },
  { q: "Many companies expressed concern about the ______ in costs.", options: ["rise", "rising", "rose", "raises"], answer: "rise", explanations: { ja: "冠詞 'the' の後には名詞が必要。'rise' は名詞で『上昇』。", en: "After 'the', a noun is needed. 'Rise' is a noun meaning increase.", ko: "'the' 다음에는 명사가 필요합니다. 'rise'는 명사로 '상승'을 의미합니다." } },
  { q: "Some analysts predict the tariffs may ______ global trade in the long term.", options: ["affect", "effect", "affecting", "affected"], answer: "affect", explanations: { ja: "助動詞 'may' の後には動詞の原形 'affect' が必要。", en: "After 'may', the base form of the verb 'affect' is required.", ko: "'may' 다음에는 동사 원형 'affect'가 와야 합니다." } },
  { q: "The announcement caused a significant reaction in the ______ markets.", options: ["financial", "finance", "financing", "financed"], answer: "financial", explanations: { ja: "名詞 'markets' を修飾する形容詞 'financial'（金融の）が正しい。", en: "An adjective is needed to modify 'markets'. 'Financial' fits here.", ko: "명사 'markets'를 수식하는 형용사 'financial'이 맞습니다." } },
];

const questionDiv = document.getElementById("questions");
part5Data.forEach((item, index) => {
  const block = document.createElement("div");
  block.className = "question";
  block.innerHTML = `<p><strong>Q${index + 1}:</strong> ${item.q}</p>` +
    item.options.map(opt => `
      <label><input type="radio" name="q${index}" value="${opt}"> ${opt}</label><br>`).join("") +
    `<p class="explanation" id="explain${index}"></p>`;
  questionDiv.appendChild(block);
});

// Part 6 コンテンツ追加
const part6Container = document.getElementById("part6");
part6Container.innerHTML = `
  <p>To: All Staff</p>
  <p>Subject: Change in Travel Policy</p>
  <p>Due to the recent political developments in neighboring countries, we are reviewing all scheduled overseas business trips. Please note the following updates:</p>
  <ol>
    <li>All travel to South Korea is temporarily ______.</li>
    <li>Employees are advised to ______ their upcoming itineraries with the HR department.</li>
    <li>Further communication will be shared ______.</li>
    <li>We appreciate your understanding and cooperation during this ______ period.</li>
  </ol>
  <div class="question">
    <p><strong>Q6:</strong> <br>
      <label><input type="radio" name="q5" value="canceled"> canceled</label><br>
      <label><input type="radio" name="q5" value="reviewing"> reviewing</label><br>
      <label><input type="radio" name="q5" value="postponed"> postponed</label><br>
      <label><input type="radio" name="q5" value="approved"> approved</label><br>
    </p>
    <p class="explanation" id="explain5"></p>
  </div>
  <div class="question">
    <p><strong>Q7:</strong> <br>
      <label><input type="radio" name="q6" value="submit"> submit</label><br>
      <label><input type="radio" name="q6" value="consult"> consult</label><br>
      <label><input type="radio" name="q6" value="confirm"> confirm</label><br>
      <label><input type="radio" name="q6" value="adjust"> adjust</label><br>
    </p>
    <p class="explanation" id="explain6"></p>
  </div>
  <div class="question">
    <p><strong>Q8:</strong> <br>
      <label><input type="radio" name="q7" value="recently"> recently</label><br>
      <label><input type="radio" name="q7" value="shortly"> shortly</label><br>
      <label><input type="radio" name="q7" value="quickly"> quickly</label><br>
      <label><input type="radio" name="q7" value="lately"> lately</label><br>
    </p>
    <p class="explanation" id="explain7"></p>
  </div>
  <div class="question">
    <p><strong>Q9:</strong> <br>
      <label><input type="radio" name="q8" value="transition"> transition</label><br>
      <label><input type="radio" name="q8" value="temporary"> temporary</label><br>
      <label><input type="radio" name="q8" value="unstable"> unstable</label><br>
      <label><input type="radio" name="q8" value="productive"> productive</label><br>
    </p>
    <p class="explanation" id="explain8"></p>
  </div>`;});
  </script>
</body>
</html>
