<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>今週の時事TOEIC：Part 5 模擬問題</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 800px; margin: auto; line-height: 1.6; }
    h1, h2 { color: #003366; }
    .question { margin-bottom: 2em; }
    .result { font-weight: bold; font-size: 1.2em; margin-top: 2em; }
    .correct { color: green; }
    .incorrect { color: red; }
    #timer { font-weight: bold; font-size: 1.1em; margin-bottom: 1em; color: #555; }
  </style>
</head>
<body>

<h1>📝 今週の時事TOEIC Part 5 模擬問題（全25問）</h1>
<div id="timer">🕒 解答時間: 0秒</div>
<form id="toeic-form">
  <div id="questions"></div>
  <button type="button" onclick="gradeQuiz()">解答を提出する</button>
</form>

<div id="score" class="result"></div>
<div id="time-result" class="result"></div>

<script>
  let startTime = Date.now();

  const quizData = [
    { q: "Shohei Ohtani’s first home run of the season was ______ after a video review.", options: ["awarded", "confirmed", "announced", "received"], answer: "confirmed" },
    { q: "The fans ______ the stadium before the game started to see Ohtani practice.", options: ["have entered", "entering", "entered", "will entering"], answer: "entered" },
    { q: "The Tokyo Dome event was ______ broadcast across Japan.", options: ["nation", "national", "nationwide", "nationalism"], answer: "nationwide" },
    { q: "The umpire's decision was final and could not be ______.", options: ["appeal", "appealing", "appealed", "appeals"], answer: "appealed" },
    { q: "Ohtani was ______ the MVP for the 2025 season.", options: ["give", "gave", "giving", "given"], answer: "given" },
    { q: "The Dodgers' victory in Tokyo was celebrated ______ fans around the world.", options: ["by", "at", "to", "with"], answer: "by" },
    { q: "The stadium was filled to ______ capacity during the opening game.", options: ["its", "it", "their", "his"], answer: "its" },
    { q: "Ohtani’s presence greatly ______ ticket sales.", options: ["increased", "enhancing", "growth", "expand"], answer: "increased" },
    { q: "A ______ of reporters gathered to cover the game.", options: ["crew", "staff", "team", "group"], answer: "group" },
    { q: "The announcer welcomed everyone and ______ the beginning of the match.", options: ["declared", "intended", "invented", "attended"], answer: "declared" },
    { q: "Shohei Ohtani has continued to ______ fans with his skills and personality.", options: ["impress", "impressed", "impresses", "impressing"], answer: "impress" },
    { q: "The team arranged a press conference ______ the game.", options: ["during", "while", "after", "since"], answer: "after" },
    { q: "Ohtani was interviewed by several media outlets, including NHK and ______.", options: ["and", "or", "but", "CNN"], answer: "CNN" },
    { q: "The Tokyo series ______ a major success for MLB.", options: ["was", "were", "are", "be"], answer: "was" },
    { q: "The game was postponed due to heavy rain, but it ______ resumed later.", options: ["is", "has", "was", "will"], answer: "was" },
    { q: "The pitcher threw a fastball that Ohtani ______ with ease.", options: ["hit", "hits", "hitting", "was hit"], answer: "hit" },
    { q: "The crowd cheered ______ when the ball landed in the stands.", options: ["loud", "loudly", "louder", "more loud"], answer: "loudly" },
    { q: "MLB officials stated that the Tokyo series was held ______ high safety standards.", options: ["with", "under", "over", "for"], answer: "under" },
    { q: "Tickets for the event were sold out within ______.", options: ["hours", "hour", "a hours", "an hour"], answer: "hours" },
    { q: "The manager said he was proud of the team’s ______.", options: ["perform", "performance", "performed", "performing"], answer: "performance" },
    { q: "Japanese media extensively ______ the Tokyo games.", options: ["cover", "covering", "covered", "covers"], answer: "covered" },
    { q: "Fans bought merchandise to ______ their support.", options: ["shown", "show", "shows", "showing"], answer: "show" },
    { q: "The game not only entertained fans but also ______ tourism in Tokyo.", options: ["boost", "boosted", "boosting", "boosts"], answer: "boosted" },
    { q: "Many international visitors traveled to Tokyo ______ the game.", options: ["attending", "attend", "to attend", "attended"], answer: "to attend" },
    { q: "Local businesses reported an increase in sales, ______ the event’s economic impact.", options: ["highlighting", "highlighted", "highlight", "to highlight"], answer: "highlighting" }
  ];

  const questionDiv = document.getElementById("questions");
  const timerDisplay = document.getElementById("timer");
  const expectedTimeSec = 600; // 25問 = 約10分 (600秒)

  function updateTimer() {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    timerDisplay.textContent = `🕒 解答時間: ${elapsed}秒（目安: 600秒）`;
  }

  setInterval(updateTimer, 1000);

  quizData.forEach((item, index) => {
    const block = document.createElement("div");
    block.className = "question";
    block.innerHTML = `<p><strong>Q${index + 1}:</strong> ${item.q}</p>` +
      item.options.map((opt) => `
        <label><input type="radio" name="q${index}" value="${opt}"> ${opt}</label><br>`
      ).join("");
    questionDiv.appendChild(block);
  });

  function gradeQuiz() {
    let correct = 0;
    quizData.forEach((item, index) => {
      const selected = document.querySelector(`input[name=q${index}]:checked`);
      if (selected && selected.value === item.answer) {
        correct++;
      }
    });
    const percentage = ((correct / quizData.length) * 100).toFixed(1);
    document.getElementById("score").innerHTML = `あなたの正解数は <span class="correct">${correct}</span> / ${quizData.length}（<strong>${percentage}%</strong>）です！`;

    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    let timeMessage = `⏱ 解答時間は ${elapsed} 秒です。`;
    if (elapsed <= expectedTimeSec) {
      timeMessage += "（時間内に解き終わりました✨）";
    } else {
      timeMessage += "（想定時間を超えています⚠️）";
    }
    document.getElementById("time-result").textContent = timeMessage;
  }
</script>
<div class="result">
  <h2>📤 結果をSNSでシェアしよう！</h2>
  <p>この模擬テストに挑戦したことを友達に知らせよう！</p>
  <button onclick="shareOnTwitter()">🕊 X（Twitter）でシェア</button>
  <button onclick="captureResult()">📸 Instagram用画像を保存</button>
</div>

<!-- html2canvasライブラリ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
  function shareOnTwitter() {
    const scoreText = document.getElementById("score")?.textContent || "";
    const timeText = document.getElementById("time-result")?.textContent || "";
    const tweetText = encodeURIComponent(`TOEIC Part 5 模擬問題に挑戦しました！\n${scoreText}\n${timeText}\n#TOEIC #英語学習 #模試 #推しTOEIC`);
    const url = encodeURIComponent(window.location.href);
    const tweetUrl = `https://twitter.com/intent/tweet?text=${tweetText}&url=${url}`;
    window.open(tweetUrl, '_blank');
  }

  function captureResult() {
    const resultArea = document.querySelector('.result');
    html2canvas(resultArea).then(canvas => {
      const link = document.createElement('a');
      link.download = 'toeic_result.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  }

  // 解説表示処理
  function showExplanations(quizData) {
    const explanationDiv = document.createElement("div");
    explanationDiv.className = "result";
    explanationDiv.innerHTML = "<h2>🧠 解説</h2>";

    quizData.forEach((item, index) => {
      const selected = document.querySelector(`input[name=q${index}]:checked`);
      const userAnswer = selected ? selected.value : "（未回答）";
      explanationDiv.innerHTML += `<p><strong>Q${index + 1}:</strong><br>あなたの答え: ${userAnswer}<br>正解: ${item.answer}<br>解説: ${item.explanation}</p>`;
    });

    document.body.appendChild(explanationDiv);
  }

  // quizDataに解説を追加して使ってもらう前提
  if (typeof quizData !== 'undefined') {
    quizData.forEach((item, index) => {
  const explanations = [
    "'confirmed' は『確認された』という意味で、ビデオ判定に適しています。",
    "時制は過去。文脈は過去なので 'entered' が適切。",
    "'nationwide' は『全国的に』の意味で副詞句として使えます。",
    "'be appealed' は受動態の形。決定が『上訴される』という意味。",
    "'be given' で受動態。Ohtaniは与えられた側。",
    "celebrated の後ろにくる前置詞は 'by'。〜によって祝われた、の意味。",
    "'its' は無生物主語の所有を表す。stadium は単数なので 'its'。",
    "'increased' は動詞。文法的に他の選択肢は不適。",
    "'group' は人の集まりに広く使われる単語。",
    "試合開始を 'declared'（宣言する）するのが自然な表現。",
    "'continue to + 動詞の原形' で継続的な動作を表す。",
    "試合後の出来事を述べているため 'after' が最も自然。",
    "'CNN' は 'including' の目的語として自然。",
    "The Tokyo series は単数扱いなので 'was'。",
    "'was' は過去の受動態を形成。",
    "主語が Ohtani（人）なので 'hit' がシンプルで正しい。",
    "副詞 'loudly' が 'cheered' を修飾。",
    "安全基準 'standards' に使う前置詞は 'under'（〜のもとで）。",
    "within + 複数形で 'hours' が自然。",
    "'performance' は名詞で、文法的に正しい補語になる。",
    "'covered' は過去形、報道が完了している意味で正しい。",
    "'show' は不定詞（to show）に続く動詞の原形で文法的に正しい。",
    "主語が 'the game' で過去に起きたことなので 'boosted' が正しい。",
    "目的を表す 'to attend'（〜するために）が自然。",
    "後続の内容を強調する分詞構文 'highlighting' が自然。"
  ];
  item.explanation = explanations[index];
});
  }

  // 既存のgradeQuiz関数に追記する想定
  const originalGradeQuiz = gradeQuiz;
  gradeQuiz = function() {
    originalGradeQuiz();
    showExplanations(quizData);
  }
</script>

</body>
</html>
