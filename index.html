<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ä»Šé€±ã®æ™‚äº‹TOEICï¼šPart 5 æ¨¡æ“¬å•é¡Œ</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 800px; margin: auto; line-height: 1.6; }
    h1, h2 { color: #003366; }
    .question { margin-bottom: 2em; }
    .result { font-weight: bold; font-size: 1.2em; margin-top: 2em; }
    .correct { color: green; }
    .incorrect { color: red; }
    #timer { font-weight: bold; font-size: 1.1em; margin-bottom: 1em; color: #555; }
    #language-select { margin-bottom: 1em; }
  </style>
</head>
<body>

<h1 id="main-title">ğŸ“ ä»Šé€±ã®æ™‚äº‹TOEIC Part 5 æ¨¡æ“¬å•é¡Œï¼ˆå…¨25å•ï¼‰</h1>
<div id="language-select">
  ğŸŒ è¨€èªã‚’é¸æŠ: 
  <select onchange="setLanguage(this.value)">
    <option value="ja">æ—¥æœ¬èª</option>
    <option value="en">English</option>
    <option value="ko">í•œêµ­ì–´</option>
  </select>
</div>
<div id="timer">ğŸ•’ è§£ç­”æ™‚é–“: 0ç§’</div>
<form id="toeic-form">
  <div id="questions"></div>
  <button id="submit-button" type="button" onclick="gradeQuiz()">è§£ç­”ã‚’æå‡ºã™ã‚‹</button>
</form>

<div id="score" class="result"></div>
<div id="time-result" class="result"></div>

<div class="result">
  <h2 id="share-title">ğŸ“¤ çµæœã‚’SNSã§ã‚·ã‚§ã‚¢ã—ã‚ˆã†ï¼</h2>
  <p id="share-text">ã“ã®æ¨¡æ“¬ãƒ†ã‚¹ãƒˆã«æŒ‘æˆ¦ã—ãŸã“ã¨ã‚’å‹é”ã«çŸ¥ã‚‰ã›ã‚ˆã†ï¼</p>
  <button id="share-twitter" onclick="shareOnTwitter()">ğŸ•Š Xï¼ˆTwitterï¼‰ã§ã‚·ã‚§ã‚¢</button>
  <button id="share-instagram" onclick="captureResult()">ğŸ“¸ Instagramç”¨ç”»åƒã‚’ä¿å­˜</button>
</div>

<!-- html2canvasãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
// JavaScript å…¨é¢åŸ‹ã‚è¾¼ã¿ç‰ˆ

let currentLang = "ja";
let startTime = Date.now();
const expectedTimeSec = 600;

const quizData = [
  { q: "Shohei Ohtaniâ€™s first home run of the season was ______ after a video review.", options: ["awarded", "confirmed", "announced", "received"], answer: "confirmed" },
  { q: "The fans ______ the stadium before the game started to see Ohtani practice.", options: ["have entered", "entering", "entered", "will entering"], answer: "entered" },
  { q: "The Tokyo Dome event was ______ broadcast across Japan.", options: ["nation", "national", "nationwide", "nationalism"], answer: "nationwide" },
  { q: "The umpire's decision was final and could not be ______.", options: ["appeal", "appealing", "appealed", "appeals"], answer: "appealed" },
  { q: "Ohtani was ______ the MVP for the 2025 season.", options: ["give", "gave", "giving", "given"], answer: "given" },
  { q: "The Dodgers' victory in Tokyo was celebrated ______ fans around the world.", options: ["by", "at", "to", "with"], answer: "by" },
  { q: "The stadium was filled to ______ capacity during the opening game.", options: ["its", "it", "their", "his"], answer: "its" },
  { q: "Ohtaniâ€™s presence greatly ______ ticket sales.", options: ["increased", "enhancing", "growth", "expand"], answer: "increased" },
  { q: "A ______ of reporters gathered to cover the game.", options: ["crew", "staff", "team", "group"], answer: "group" },
  { q: "The announcer welcomed everyone and ______ the beginning of the match.", options: ["declared", "intended", "invented", "attended"], answer: "declared" },
  { q: "Shohei Ohtani has continued to ______ fans with his skills and personality.", options: ["impress", "impressed", "impresses", "impressing"], answer: "impress" },
  { q: "The team arranged a press conference ______ the game.", options: ["during", "while", "after", "since"], answer: "after" },
  { q: "Ohtani was interviewed by several media outlets, including NHK and ______.", options: ["and", "or", "but", "CNN"], answer: "CNN" },
  { q: "The Tokyo series ______ a major success for MLB.", options: ["was", "were", "are", "be"], answer: "was" },
  { q: "The game was postponed due to heavy rain, but it ______ resumed later.", options: ["is", "has", "was", "will"], answer: "was" },
  { q: "The pitcher threw a fastball that Ohtani ______ with ease.", options: ["hit", "hits", "hitting", "was hit"], answer: "hit" },
  { q: "The crowd cheered ______ when the ball landed in the stands.", options: ["loud", "loudly", "louder", "more loud"], answer: "loudly" },
  { q: "MLB officials stated that the Tokyo series was held ______ high safety standards.", options: ["with", "under", "over", "for"], answer: "under" },
  { q: "Tickets for the event were sold out within ______.", options: ["hours", "hour", "a hours", "an hour"], answer: "hours" },
  { q: "The manager said he was proud of the teamâ€™s ______.", options: ["perform", "performance", "performed", "performing"], answer: "performance" },
  { q: "Japanese media extensively ______ the Tokyo games.", options: ["cover", "covering", "covered", "covers"], answer: "covered" },
  { q: "Fans bought merchandise to ______ their support.", options: ["shown", "show", "shows", "showing"], answer: "show" },
  { q: "The game not only entertained fans but also ______ tourism in Tokyo.", options: ["boost", "boosted", "boosting", "boosts"], answer: "boosted" },
  { q: "Many international visitors traveled to Tokyo ______ the game.", options: ["attending", "attend", "to attend", "attended"], answer: "to attend" },
  { q: "Local businesses reported an increase in sales, ______ the eventâ€™s economic impact.", options: ["highlighting", "highlighted", "highlight", "to highlight"], answer: "highlighting" }
];

window.addEventListener("DOMContentLoaded", () => {
  const questionDiv = document.getElementById("questions");
  quizData.forEach((item, index) => {
    const block = document.createElement("div");
    block.className = "question";
    block.innerHTML = `<p><strong>Q${index + 1}:</strong> ${item.q}</p>` +
      item.options.map(opt => `
        <label><input type="radio" name="q${index}" value="${opt}"> ${opt}</label><br>`).join("");
    questionDiv.appendChild(block);
  });
});

function gradeQuiz() {
  let correct = 0;
  quizData.forEach((item, index) => {
    const selected = document.querySelector(`input[name=q${index}]:checked`);
    if (selected && selected.value === item.answer) {
      correct++;
    }
  });
  const percentage = ((correct / quizData.length) * 100).toFixed(1);
  document.getElementById("score").innerHTML = `æ­£è§£æ•°ã¯ <span class="correct">${correct}</span> / ${quizData.length}ï¼ˆ<strong>${percentage}%</strong>ï¼‰ã§ã™ï¼`;

  const elapsed = Math.floor((Date.now() - startTime) / 1000);
  let timeMessage = `â± è§£ç­”æ™‚é–“ã¯ ${elapsed}ç§’ã§ã™ã€‚`;
  timeMessage += elapsed <= expectedTimeSec ? "ï¼ˆæ™‚é–“å†…ã«è§£ãçµ‚ã‚ã‚Šã¾ã—ãŸâœ¨ï¼‰" : "ï¼ˆæƒ³å®šæ™‚é–“ã‚’è¶…ãˆã¦ã„ã¾ã™âš ï¸ï¼‰";
  document.getElementById("time-result").textContent = timeMessage;
}

function shareOnTwitter() {
  const scoreText = document.getElementById("score")?.textContent || "";
  const timeText = document.getElementById("time-result")?.textContent || "";
  const tweetText = encodeURIComponent(`TOEIC Part 5 æ¨¡æ“¬å•é¡Œã«æŒ‘æˆ¦ã—ã¾ã—ãŸï¼
${scoreText}
${timeText}
#TOEIC #è‹±èªå­¦ç¿’ #æ¨¡è©¦ #æ¨ã—TOEIC`);
  const url = encodeURIComponent(window.location.href);
  const tweetUrl = `https://twitter.com/intent/tweet?text=${tweetText}&url=${url}`;
  window.open(tweetUrl, '_blank');
}

function captureResult() {
  const resultArea = document.querySelector('.result');
  html2canvas(resultArea).then(canvas => {
    const link = document.createElement('a');
    link.download = 'toeic_result.png';
    link.href = canvas.toDataURL();
    link.click();
  });
}
</script>
</body>
</html>
