<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>今週の時事TOEIC：Part 5 模擬問題</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 800px; margin: auto; line-height: 1.6; }
    h1, h2 { color: #003366; }
    .question { margin-bottom: 2em; }
    .result { font-weight: bold; font-size: 1.2em; margin-top: 2em; }
    .correct { color: green; }
    .incorrect { color: red; }
    #timer { font-weight: bold; font-size: 1.1em; margin-bottom: 1em; color: #555; }
    #language-select { margin-bottom: 1em; }
  </style>
</head>
<body>

<h1 id="main-title">📝 今週の時事TOEIC Part 5 模擬問題（全25問）</h1>
<div id="language-select">
  🌐 言語を選択: 
  <select onchange="setLanguage(this.value)">
    <option value="ja">日本語</option>
    <option value="en">English</option>
    <option value="ko">한국어</option>
  </select>
</div>
<div id="timer">🕒 解答時間: 0秒</div>
<form id="toeic-form">
  <div id="questions"></div>
  <button id="submit-button" type="button" onclick="gradeQuiz()">解答を提出する</button>
</form>

<div id="score" class="result"></div>
<div id="time-result" class="result"></div>

<div class="result">
  <h2 id="share-title">📤 結果をSNSでシェアしよう！</h2>
  <p id="share-text">この模擬テストに挑戦したことを友達に知らせよう！</p>
  <button id="share-twitter" onclick="shareOnTwitter()">🕊 X（Twitter）でシェア</button>
  <button id="share-instagram" onclick="captureResult()">📸 Instagram用画像を保存</button>
</div>

<!-- html2canvasライブラリ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
// 問題データ（25問）
const quizData = [
  { q: "Shohei Ohtani’s first home run of the season was ______ after a video review.", options: ["awarded", "confirmed", "announced", "received"], answer: "confirmed" },
  { q: "The fans ______ the stadium before the game started to see Ohtani practice.", options: ["have entered", "entering", "entered", "will entering"], answer: "entered" },
  { q: "The Tokyo Dome event was ______ broadcast across Japan.", options: ["nation", "national", "nationwide", "nationalism"], answer: "nationwide" },
  { q: "The umpire's decision was final and could not be ______.", options: ["appeal", "appealing", "appealed", "appeals"], answer: "appealed" },
  { q: "Ohtani was ______ the MVP for the 2025 season.", options: ["give", "gave", "giving", "given"], answer: "given" },
  { q: "The Dodgers' victory in Tokyo was celebrated ______ fans around the world.", options: ["by", "at", "to", "with"], answer: "by" },
  { q: "The stadium was filled to ______ capacity during the opening game.", options: ["its", "it", "their", "his"], answer: "its" },
  { q: "Ohtani’s presence greatly ______ ticket sales.", options: ["increased", "enhancing", "growth", "expand"], answer: "increased" },
  { q: "A ______ of reporters gathered to cover the game.", options: ["crew", "staff", "team", "group"], answer: "group" },
  { q: "The announcer welcomed everyone and ______ the beginning of the match.", options: ["declared", "intended", "invented", "attended"], answer: "declared" },
  { q: "Shohei Ohtani has continued to ______ fans with his skills and personality.", options: ["impress", "impressed", "impresses", "impressing"], answer: "impress" },
  { q: "The team arranged a press conference ______ the game.", options: ["during", "while", "after", "since"], answer: "after" },
  { q: "Ohtani was interviewed by several media outlets, including NHK and ______.", options: ["and", "or", "but", "CNN"], answer: "CNN" },
  { q: "The Tokyo series ______ a major success for MLB.", options: ["was", "were", "are", "be"], answer: "was" },
  { q: "The game was postponed due to heavy rain, but it ______ resumed later.", options: ["is", "has", "was", "will"], answer: "was" },
  { q: "The pitcher threw a fastball that Ohtani ______ with ease.", options: ["hit", "hits", "hitting", "was hit"], answer: "hit" },
  { q: "The crowd cheered ______ when the ball landed in the stands.", options: ["loud", "loudly", "louder", "more loud"], answer: "loudly" },
  { q: "MLB officials stated that the Tokyo series was held ______ high safety standards.", options: ["with", "under", "over", "for"], answer: "under" },
  { q: "Tickets for the event were sold out within ______.", options: ["hours", "hour", "a hours", "an hour"], answer: "hours" },
  { q: "The manager said he was proud of the team’s ______.", options: ["perform", "performance", "performed", "performing"], answer: "performance" },
  { q: "Japanese media extensively ______ the Tokyo games.", options: ["cover", "covering", "covered", "covers"], answer: "covered" },
  { q: "Fans bought merchandise to ______ their support.", options: ["shown", "show", "shows", "showing"], answer: "show" },
  { q: "The game not only entertained fans but also ______ tourism in Tokyo.", options: ["boost", "boosted", "boosting", "boosts"], answer: "boosted" },
  { q: "Many international visitors traveled to Tokyo ______ the game.", options: ["attending", "attend", "to attend", "attended"], answer: "to attend" },
  { q: "Local businesses reported an increase in sales, ______ the event’s economic impact.", options: ["highlighting", "highlighted", "highlight", "to highlight"], answer: "highlighting" }
];
  const explanationsLang = {
  ja: [
    "'confirmed' は『確認された』という意味で、ビデオ判定に適しています。",
    "時制は過去。文脈は過去なので 'entered' が適切。",
    "'nationwide' は『全国的に』の意味で副詞句として使えます。",
    "'be appealed' は受動態の形。決定が『上訴される』という意味。",
    "'be given' で受動態。Ohtaniは与えられた側。",
    "celebrated の後ろにくる前置詞は 'by'。〜によって祝われた、の意味。",
    "'its' は無生物主語の所有を表す。stadium は単数なので 'its'。",
    "'increased' は動詞。文法的に他の選択肢は不適。",
    "'group' は人の集まりに広く使われる単語。",
    "試合開始を 'declared'（宣言する）するのが自然な表現。",
    "'continue to + 動詞の原形' で継続的な動作を表す。",
    "試合後の出来事を述べているため 'after' が最も自然。",
    "'CNN' は 'including' の目的語として自然。",
    "The Tokyo series は単数扱いなので 'was'。",
    "'was' は過去の受動態を形成。",
    "主語が Ohtani（人）なので 'hit' がシンプルで正しい。",
    "副詞 'loudly' が 'cheered' を修飾。",
    "安全基準 'standards' に使う前置詞は 'under'（〜のもとで）。",
    "within + 複数形で 'hours' が自然。",
    "'performance' は名詞で、文法的に正しい補語になる。",
    "'covered' は過去形、報道が完了している意味で正しい。",
    "'show' は不定詞（to show）に続く動詞の原形で文法的に正しい。",
    "主語が 'the game' で過去に起きたことなので 'boosted' が正しい。",
    "目的を表す 'to attend'（〜するために）が自然。",
    "後続の内容を強調する分詞構文 'highlighting' が自然。"
  ],
  en: [
    "'Confirmed' is appropriate for describing something verified by video review.",
    "The past tense 'entered' fits the past context.",
    "'Nationwide' means 'across the country' and works as an adverb.",
    "'Be appealed' is passive; a decision can be appealed.",
    "'Was given' is the correct passive form — Ohtani was the recipient.",
    "The correct preposition after 'celebrated' is 'by'.",
    "'Its' shows possession for inanimate subjects like 'stadium'.",
    "'Increased' is the correct verb form; others are ungrammatical.",
    "'Group' is the most general and suitable collective noun here.",
    "'Declared' fits for formally announcing the match.",
    "'Continue to impress' is a common phrase with verb base form.",
    "'After the game' is the correct temporal conjunction.",
    "'CNN' makes sense as part of a list with 'including'.",
    "'Was' is needed because 'series' is treated as singular.",
    "'Was' forms the correct passive construction.",
    "'Hit' is simple past and fits well with the subject.",
    "'Loudly' is the adverb that modifies 'cheered'.",
    "Use 'under' to describe compliance with standards.",
    "'Hours' matches the plural usage after 'within'.",
    "'Performance' is the correct noun to complete the phrase.",
    "'Covered' is correct past tense for reported events.",
    "'Show' is the base form needed after 'to'.",
    "'Boosted' reflects a past action correctly.",
    "'To attend' expresses purpose appropriately.",
    "'Highlighting' is the right participle form to show effect."
  ],
  ko: [
    "'confirmed'는 비디오 판독을 통해 '확인된'이라는 의미로 적절합니다.",
    "과거 시제 'entered'가 문맥에 맞습니다.",
    "'nationwide'는 '전국적으로'라는 뜻의 부사로 적절합니다.",
    "'be appealed'는 수동형이며, 결정은 항소될 수 있습니다.",
    "'was given'은 수동태로, Ohtani가 수여받은 사람입니다.",
    "'celebrated' 다음에는 'by'가 어울립니다.",
    "stadium은 무생물이므로 소유격 'its'가 맞습니다.",
    "'increased'는 동사이며, 나머지는 문법적으로 부적절합니다.",
    "'group'은 기자들의 모임을 나타내기에 적합한 단어입니다.",
    "경기를 'declared'(선언하다) 하는 것이 자연스럽습니다.",
    "'continue to impress'는 일반적인 표현입니다.",
    "경기 후 상황이므로 'after'가 가장 적절합니다.",
    "'CNN'은 'including'과 함께 자연스럽게 연결됩니다.",
    "'series'는 단수 취급이므로 'was'를 사용합니다.",
    "'was'는 수동태를 형성합니다.",
    "주어가 사람(Ohtani)이므로 'hit'이 적절합니다.",
    "부사 'loudly'는 'cheered'를 수식합니다.",
    "'under'는 기준 아래 있다는 표현에 적절합니다.",
    "'hours'는 'within' 뒤의 복수 형태로 맞습니다.",
    "'performance'는 올바른 명사 형태입니다.",
    "'covered'는 과거 시제로 적절합니다.",
    "'show'는 'to' 다음에 나오는 동사 원형입니다.",
    "'boosted'는 과거 시제로 적합합니다.",
    "'to attend'는 목적을 표현하는 데 적절합니다.",
    "'highlighting'은 결과를 설명하는 분사 표현입니다."
  ]
};

const translations = {
  buttons: {
    ja: {
      twitter: "🕊 X（Twitter）でシェア",
      instagram: "📸 Instagram用画像を保存"
    },
    en: {
      seconds: "seconds",
      twitter: "🕊 Share on X (Twitter)",
      instagram: "📸 Save Image for Instagram"
    },
    ko: {
      seconds: "초",
      twitter: "🕊 X (트위터)로 공유하기",
      instagram: "📸 인스타그램용 이미지 저장"
    }
  },
  labels: {
    ja: {
      seconds: "秒",
      yourAnswer: "あなたの答え",
      correctAnswer: "正解",
      explanation: "解説",
      scoreSummary: "あなたの正解数は",
      timeTaken: "⏱ 解答時間は",
      withinTime: "（時間内に解き終わりました✨）",
      overtime: "（想定時間を超えています⚠️）"
    },
    en: {
      yourAnswer: "Your Answer",
      correctAnswer: "Correct Answer",
      explanation: "Explanation",
      scoreSummary: "Your correct answers:",
      timeTaken: "⏱ Time Taken:",
      withinTime: "(Finished within time ✨)",
      overtime: "(Over expected time ⚠️)"
    },
    ko: {
      yourAnswer: "당신의 답변",
      correctAnswer: "정답",
      explanation: "해설",
      scoreSummary: "정답 수:",
      timeTaken: "⏱ 소요 시간:",
      withinTime: "(시간 내에 완료 ✨)",
      overtime: "(예상 시간을 초과 ⚠️)"
    }
  },
    ja: {
      title: "📝 今週の時事TOEIC Part 5 模擬問題（全25問）",
      shareTitle: "📤 結果をSNSでシェアしよう！",
      shareText: "この模擬テストに挑戦したことを友達に知らせよう！"
    },
    en: {
      title: "📝 This Week's Current TOEIC Part 5 Practice Test (25 Questions)",
      shareTitle: "📤 Share Your Results on Social Media!",
      shareText: "Let your friends know you challenged this mock TOEIC test!"
    },
    ko: {
      title: "📝 이번 주 시사 TOEIC Part 5 모의시험 (총 25문제)",
      shareTitle: "📤 결과를 SNS에 공유하세요!",
      shareText: "이 모의시험에 도전한 것을 친구들에게 알려보세요!"
    }
  };

  let currentLang = "ja";
function setLanguage(lang) {
  currentLang = lang;
  localStorage.setItem("toeicLang", lang);
  document.getElementById("main-title").textContent = translations[lang].title;
  document.getElementById("share-title").textContent = translations[lang].shareTitle;
  document.getElementById("share-text").textContent = translations[lang].shareText;
  document.querySelector(`#language-select select`).value = lang;
  const submitBtn = document.getElementById("submit-button");
  const twitterBtn = document.getElementById("share-twitter");
  const instaBtn = document.getElementById("share-instagram");

  if (submitBtn) {
    if (lang === "ja") submitBtn.textContent = "解答を提出する";
    if (lang === "en") submitBtn.textContent = "Submit Answers";
    if (lang === "ko") submitBtn.textContent = "답안 제출하기";
  }
  if (twitterBtn) twitterBtn.textContent = translations.buttons[lang].twitter;
  if (instaBtn) instaBtn.textContent = translations.buttons[lang].instagram;
}
</script>
<script>
// タイマー表示
let startTime = Date.now();
const timerDisplay = document.getElementById("timer");
setInterval(() => {
  const elapsed = Math.floor((Date.now() - startTime) / 1000);
  timerDisplay.textContent = `${translations.labels[currentLang].timeTaken} ${elapsed}${translations.labels[currentLang].seconds}（目安: 600${translations.labels[currentLang].seconds}）`;
}, 1000);

// ページ読み込み時に言語設定と問題描画を実行
window.addEventListener("DOMContentLoaded", () => {
  const savedLang = localStorage.getItem("toeicLang");
  if (savedLang && translations[savedLang]) {
    setLanguage(savedLang);
  } else {
    setLanguage("ja");
  }

  // 問題表示処理
  const questionDiv = document.getElementById("questions");
  quizData.forEach((item, index) => {
    const block = document.createElement("div");
    block.className = "question";
    block.innerHTML = `<p><strong>Q${index + 1}:</strong> ${item.q}</p>` +
      item.options.map(opt => `
        <label><input type="radio" name="q${index}" value="${opt}"> ${opt}</label><br>`).join("");
    questionDiv.appendChild(block);
  });
});
function gradeQuiz() {
  let correct = 0;
  const explanationDiv = document.createElement("div");
  explanationDiv.className = "result";
  explanationDiv.innerHTML = `<h2>🧠 ${translations.labels[currentLang].explanation}</h2>`;

  for (let i = 0; i < quizData.length; i++) {
    const selected = document.querySelector(`input[name=q${i}]:checked`);
    const userAnswer = selected ? selected.value : "（未回答）";
    if (selected && selected.value === quizData[i].answer) correct++;

    explanationDiv.innerHTML += `
      <p><strong>Q${i + 1}:</strong><br>
      ${translations.labels[currentLang].yourAnswer}: ${userAnswer}<br>
      ${translations.labels[currentLang].correctAnswer}: ${quizData[i].answer}<br>
      ${translations.labels[currentLang].explanation}: ${explanationsLang[currentLang][i]}</p>`;
  }

  const percentage = ((correct / quizData.length) * 100).toFixed(1);
  document.getElementById("score").innerHTML =
    `${translations.labels[currentLang].scoreSummary} <span class="correct">${correct}</span> / ${quizData.length}（<strong>${percentage}%</strong>）`;

  const elapsed = Math.floor((Date.now() - startTime) / 1000);
  let timeMessage = `${translations.labels[currentLang].timeTaken} ${elapsed}${translations.labels[currentLang].seconds}です。`
  timeMessage += elapsed <= 600 ? translations.labels[currentLang].withinTime : translations.labels[currentLang].overtime;
  document.getElementById("time-result").textContent = timeMessage;

  document.body.appendChild(explanationDiv);
}
</script>
</body>
</html>
